<div class="monitoring-page"><div class="row"><div class="col-lg-8 col-lg-offset-2"><h1 class="h1" id="title">{{'Monitor open cases'|translate}}<div class="pull-right refreshBlock"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate" ng-show="monitoringCtrl.loadingInProgress">&nbsp;</span><div><span class="refreshLabel">{{'Refresh'|translate}}</span>&nbsp;<div class="btn-group" dropdown><button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{monitoringCtrl.$localStorage.refreshFrequenceSelected.label|translate}} <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-click="monitoringCtrl.updateTimeout({label: 'Never', value: ''})"><a>{{'Never'|translate}}</a></li><li ng-click="monitoringCtrl.updateTimeout({label: '1 min.', value: '1'})"><a>{{'1 min.'|translate}}</a></li><li ng-click="monitoringCtrl.updateTimeout({label: '5 min.', value: '5'})"><a>{{'5 min.'|translate}}</a></li><li ng-click="monitoringCtrl.updateTimeout({label: '10 min.', value: '10'})"><a>{{'10 min.'|translate}}</a></li><li ng-click="monitoringCtrl.updateTimeout({label: '30 min.', value: '30'})"><a>{{'30 min.'|translate}}</a></li><li ng-click="monitoringCtrl.updateTimeout({label: '1 h.', value: '60'})"><a>{{'1 h.'|translate}}</a></li></ul></div></div></div></h1><div class="panel panel-default totals-panel"><div class="panel-heading"><span id="totals">{{'Totals'| translate}}</span> <span id="infoPopover" class="glyphicon glyphicon-info-sign" popover="{{'Counters include cases from root processes and cases started by call activities.' | translate}}" popover-trigger="mouseenter" popover-placement="bottom"></span><div class="center row"><div class="col-lg-8 col-lg-offset-2 col-1500-10 col-1500-offset-1"><div class="col-xs-4 totalMonitoring"><div class="totalLabel">{{'Cases with failures'|translate}}</div><span class="label label-danger">{{monitoringCtrl.totalFailedCases}}</span></div><div class="col-xs-4 totalMonitoring"><div class="totalLabel">{{'Healthy cases'|translate}}</div><span class="label ready-bg-color">{{monitoringCtrl.totalHealthyCases}}</span></div><div class="col-xs-4 totalMonitoring"><div class="totalLabel">{{'Open cases'|translate}}</div><span class="label label-default">{{monitoringCtrl.totalOpenCases}}</span></div></div></div></div></div><div id="process-filters" class="panel panel-default"><div class="panel-heading"><h2 class="panel-title">{{'Filters'|translate}}</h2></div><div class="panel-body row"><div class="col-md-4">{{'Process name'|translate}}&nbsp;<div class="btn-group" dropdown><button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{monitoringCtrl.getLabelProcessFiltered() | truncate:30:'...' | translate}} <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-click="monitoringCtrl.selectProcess()"><a>{{'All' | translate}}</a></li><li ng-if="monitoringCtrl.processes &amp;&amp; monitoringCtrl.processes.length > 0" class="divider"></li><li ng-repeat="process in monitoringCtrl.processes | unique:'displayName'" ng-click="monitoringCtrl.selectProcess(process.displayName)"><a>{{process.displayName | truncate:30:'...'}}</a></li></ul></div></div><div class="col-md-4">{{'Process version'|translate}}&nbsp;<div class="btn-group" dropdown><button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle" ng-disabled="monitoringCtrl.getSearchOptions().filterProcess.displayName  === undefined">{{monitoringCtrl.getLabelVersionFiltered() | truncate:30:'...' | translate}} <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-click="monitoringCtrl.selectVersion()"><a>{{'All' | translate}}</a></li><li ng-if="monitoringCtrl.processes &amp;&amp; (monitoringCtrl.processes | filter:{displayName: monitoringCtrl.getSearchOptions().filterProcess.displayName}).length > 0" class="divider"></li><li ng-repeat="process in monitoringCtrl.processes | filter:{displayName: monitoringCtrl.getSearchOptions().filterProcess.displayName}:true | unique:'version' | orderBy: 'version'" ng-click="monitoringCtrl.selectVersion(process.version)"><a>{{process.version | truncate:30:'...'}}</a></li></ul></div></div><div class="col-md-4">{{'Case state'|translate}}&nbsp;<div class="btn-group" dropdown><button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{monitoringCtrl.$sessionStorage.filterFailedCases|translate}} <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-click="monitoringCtrl.selectState('All')"><a>{{'All'|translate}}</a></li><li class="divider"></li><li ng-click="monitoringCtrl.selectState('Healthy')"><a>{{'Healthy'|translate}}</a></li><li ng-click="monitoringCtrl.selectState('With failures')"><a>{{'With failures'|translate}}</a></li></ul></div></div></div></div><div id="process-list" class="panel panel-default"><div class="panel-heading"><h2 class="panel-title">{{'Process list'|translate}}<div class="pull-right paginationBlock"><div>{{'Show'|translate}}&nbsp;<div class="btn-group" dropdown><button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{monitoringCtrl.$localStorage.nbPerPage}} <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-click="monitoringCtrl.selectPage(10)"><a>10</a></li><li ng-click="monitoringCtrl.selectPage(20)"><a>20</a></li><li ng-click="monitoringCtrl.selectPage(50)"><a>50</a></li><li ng-click="monitoringCtrl.selectPage(100)"><a>100</a></li><li ng-click="monitoringCtrl.selectPage(200)"><a>200</a></li><li ng-click="monitoringCtrl.selectPage(300)"><a>300</a></li></ul></div></div></div></h2></div><div class="panel-body"><table bonitable bo-storable="monitoring-list" on-storage-loaded="monitoringCtrl.loadContent()" class="table table-hover table-striped" on-sort="monitoringCtrl.sortProcess(monitoringCtrl.getSearchOptions().ordering)" sort-options="monitoringCtrl.getSearchOptions().ordering"><thead><tr><th bo-sorter="activationState" class="icons-column" bo-sorter-title-desc="{{'sort by State descending' | translate}}" bo-sorter-title-asc="{{'sort by State ascending' | translate}}">{{'State' | translate}}</th><th bo-sorter="displayName" bo-sorter-title-asc="{{'sort by Process name ascending' | translate}}" bo-sorter-title-desc="{{'sort by Process name descending' | translate}}">{{'Process name' | translate}}</th><th bo-sorter="version" class="version-column" bo-sorter-title-asc="{{'sort by Version ascending' | translate}}" bo-sorter-title-desc="{{'sort by Version descending' | translate}}">{{'Version' | translate}}</th><th bo-sorter="nbFailedCases" class="text-right number-column" bo-sorter-title-asc="{{'sort by Cases with failures ascending' | translate}}" bo-sorter-title-desc="{{'sort by Cases with failures descending' | translate}}">{{'Cases with failures' | translate}}</th><th bo-sorter="nbHealthyCases" class="text-right number-column" bo-sorter-title-asc="{{'sort by Healthy cases ascending' | translate}}" bo-sorter-title-desc="{{'sort by Healthy cases descending' | translate}}">{{'Healthy cases' | translate}}</th><th bo-sorter="nbOpenCases" class="text-right number-column" bo-sorter-title-asc="{{'sort by Open cases ascending' | translate}}" bo-sorter-title-desc="{{'sort by Open cases descending' | translate}}">{{'Open cases' | translate}}</th><th class="action-column SortButton SortButton-label text-center">{{'Actions'|translate}}</th></tr></thead><tbody><tr ng-repeat="process in (monitoringCtrl.filteredProcesses = (monitoringCtrl.processes
            | orderBy:monitoringCtrl.getOrderByPredicates()
            | filter:monitoringCtrl.processFilter))
            | offset: (monitoringCtrl.getSearchOptions().page - 1) * monitoringCtrl.getSearchOptions().nbPerPage
            | limitTo: monitoringCtrl.getSearchOptions().nbPerPage"><td><span class="glyphicon" ng-class="{'glyphicon-remove': process.activationState == 'disabled', 'glyphicon-ok': process.activationState == 'enabled'}" tooltip="{{ monitoringCtrl.getProcessSateTooltip(process) }}" tooltip-animation="false"></span></td><td><a href="" bonita-href="{'token': 'processmoredetails'+ monitoringCtrl.pageProfileToken, prependToken : false, 'id': process.id}">{{process.displayName}}</a></td><td>{{process.version}}</td><td style="text-align: right">{{process.nbFailedCases}}</td><td style="text-align: right">{{process.nbHealthyCases}}</td><td style="text-align: right">{{process.nbOpenCases}}</td><td class="text-center"><span tooltip="{{'View diagram' | translate}}" tooltip-animation="false"><a id="processVisu-btn-{{process.id}}" class="glyphicon glyphicon-picture clickable" bonita-href="{'token': 'monitoring' + monitoringCtrl.pageProfileToken, '_id': process.id}"></a></span> <span tooltip="{{'View case list' | translate}}" tooltip-animation="false"><a id="caseList-btn-{{process.id}}" class="glyphicon glyphicon-list clickable" bonita-href="{'token': 'caselisting' + monitoringCtrl.pageProfileToken, '_processId': process.id}"></a><!-- link to case list filtered on the process --></span></td></tr><tr ng-if="(monitoringCtrl.loadingInProgress == false &amp;&amp; (monitoringCtrl.processes | filter:processFilter).length == 0) || (monitoringCtrl.loadingInProgress == true)"><td colspan="10" style="text-align: center"><!--No data text or error text--><h4 ng-if="monitoringCtrl.loadingInProgress == false &amp;&amp; (monitoringCtrl.processes | filter:processFilter).length == 0">{{monitoringCtrl.noDataText}}</h4></td></tr></tbody></table><div class="pull-right" ng-if="monitoringCtrl.getTotalProcesses() > monitoringCtrl.getSearchOptions().nbPerPage"><span class="pull-left pagination-results">{{monitoringCtrl.getStartIndexOfPage() + ' to ' + monitoringCtrl.getEndIndexOfPage() + ' of ' + monitoringCtrl.getTotalProcesses() | translate}}</span><pagination boundary-links="true" total-items="monitoringCtrl.filteredProcesses.length" ng-model="monitoringCtrl.getSearchOptions().page" items-per-page="monitoringCtrl.getSearchOptions().nbPerPage" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" max-size="5"></pagination></div></div></div></div></div></div>