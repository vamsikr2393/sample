<form role="form" name="form"><div class="modal-header"><h3 ng-if="!formUploadModalCtrl.form" class="modal-title">{{'Upload new Page' | translate}}</h3><h3 ng-if="!!formUploadModalCtrl.form" class="modal-title">{{'Upload new version of {}' | translate | stringTemplater: formUploadModalCtrl.form.displayName}}</h3></div><div class="modal-body" ng-if="!formUploadModalCtrl.confirmPermissionsPage"><p>{{'The page archive (.zip file) must contain page.properties, either the index.html or the Index.groovy file, and the resources needed for the page. For details, see the documentation or the example page readme (available in the custom page list).' | translate}}</p><p ng-if="formUploadModalCtrl.uploadingResult.error" class="text-danger">{{formUploadModalCtrl.uploadingResult.error|translate}}</p><bootstrap-form-control class="field-upload-container" label="{{'Page zip file' | translate}}"><div class="upload-field"><input type="file" id="uploadForm" name="uploadForm" ng-model="formUploadModalCtrl.fileName" nv-file-select uploader="formUploadModalCtrl.uploader" accept=".zip"><div class="upload-field-content" ng-class="{'upload-success': formUploadModalCtrl.isUploadSuccess}">{{formUploadModalCtrl.fileNameÂ || 'Click here to choose your file (.zip)' | translate }}</div></div></bootstrap-form-control></div><div class="modal-body" ng-if="formUploadModalCtrl.confirmPermissionsPage"><p ng-if="formUploadModalCtrl.uploadingResult.permissions.length>0">{{'The page allows users with relevant profiles to access the following permissions:'|translate}}<ul><li ng-repeat="(key, permission) in formUploadModalCtrl.uploadingResult.permissions">{{permission|translate}}</li></ul></p><p ng-if="!formUploadModalCtrl.uploadingResult.permissions.length">{{'This page has no authorization permissions defined. If the page uses REST resources and authorization checking is activated,\n update the page definition to specify the list of resources used.'|translate}}</p></div><div class="modal-footer"><button ng-if="!formUploadModalCtrl.confirmPermissionsPage" ng-disabled="!formUploadModalCtrl.isUploadSuccess || formUploadModalCtrl.uploadingResult.error" id="next" ng-click="formUploadModalCtrl.confirmPermissionsPage = true" class="btn btn-primary">{{'Next'|translate}}</button> <button ng-if="formUploadModalCtrl.confirmPermissionsPage" ng-click="formUploadModalCtrl.confirmPermissionsPage = false" id="back" class="btn btn-default">{{'Back'|translate}}</button> <button id="cancel" class="btn btn-default" ng-click="formUploadModalCtrl.cancel()">{{ 'Cancel' | translate }}</button> <button id="confirm" ng-if="formUploadModalCtrl.isUploadSuccess && formUploadModalCtrl.confirmPermissionsPage && !formUploadModalCtrl.form" class="btn btn-primary" ng-click="formUploadModalCtrl.createPage()"><span>{{ 'Confirm' | translate }}</span></button> <button id="confirm" ng-if="formUploadModalCtrl.isUploadSuccess && formUploadModalCtrl.confirmPermissionsPage && !!formUploadModalCtrl.form" class="btn btn-primary" ng-click="formUploadModalCtrl.updatePage()"><span>{{ 'Confirm' | translate }}</span></button></div></form>